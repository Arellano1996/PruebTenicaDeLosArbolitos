
<div class="flex flex-col p-4">

    <h1 class="text-red-600 text-3xl">Batalla Pokemon</h1>
    <div class="flex space-x-10">
        <a href="codigo-morse">
            <span class="underline text-gray-400 text-sm">prueba anteior (Código Morse)<span aria-hidden="true">&rarr;</span></span>
        </a>

        <a href="">
            <span class="underline text-gray-400 text-sm">regresar al inicio<span aria-hidden="true">&rarr;</span></span>
        </a>
    </div>
    

    <div class="overflow-x-auto mt-8">
        <span class="ml-4 text-gray-400">código fuente:</span>
        <pre class="bg-gray-900 text-green-400 p-4 w-fit rounded-2xl">
            <code>
              {{ codigo }}
            </code>
        </pre>
    </div>
      
    <div class="mt-8">
        <h3 class="text-3xl text-gray-700">Ejecutar prueba</h3>

        <div class="flex flex-col mt-10">
            <div class="flex flex-col">
                <span class="text-3xl ml-3">Tabla Tipos y Debilidades </span>
                <span class="text-sm self-baseline text-gray-400 ml-3">*Todos son poco efectivos contra los de su mismo tipo</span>
            </div>
            <div class="grid grid-cols-4 rounded-xl overflow-hidden bg-gray-100 border border-gray-300 text-gray-700 w-fit">
                <div class="p-4 border border-gray-300">Tipo</div>
                <div class="p-4 border border-gray-300">Poco efectivo</div>
                <div class="p-4 border border-gray-300">Normal</div>
                <div class="p-4 border border-gray-300">Muy efectivo</div>

                <div class="flex items-center bg-white p-4 border border-gray-300 text-xl text-sky-400"><div class="bg-sky-500 w-2 h-2 rounded-full mr-2"></div> <span>Agua</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-green-500 w-2 h-2 rounded-full mr-2"></div> <span>Planta</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-yellow-400 w-2 h-2 rounded-full mr-2"></div> <span>Electrico</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-red-500 w-2 h-2 rounded-full mr-2"></div> <span>Fuego</span></div>

                <div class="flex items-center bg-white p-4 border border-gray-300 text-xl text-yellow-400"><div class="bg-yellow-400 w-2 h-2 rounded-full mr-2"></div> <span>Electrico</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-green-500 w-2 h-2 rounded-full mr-2"></div> <span>Planta</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-red-500 w-2 h-2 rounded-full mr-2"></div> <span>Fuego</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-sky-500 w-2 h-2 rounded-full mr-2"></div> <span>Agua</span></div>

                <div class="flex items-center bg-white p-4 border border-gray-300 text-xl text-red-400"><div class="bg-red-500 w-2 h-2 rounded-full mr-2"></div> <span>Fuego</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-sky-500 w-2 h-2 rounded-full mr-2"></div> <span>Agua</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-yellow-400 w-2 h-2 rounded-full mr-2"></div> <span>Electrico</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-green-500 w-2 h-2 rounded-full mr-2"></div> <span>Planta</span></div>

                <div class="flex items-center bg-white p-4 border border-gray-300 text-xl text-green-400"><div class="bg-green-500 w-2 h-2 rounded-full mr-2"></div> <span>Planta</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-red-500 w-2 h-2 rounded-full mr-2"></div> <span>Fuego</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-yellow-400 w-2 h-2 rounded-full mr-2"></div> <span>Electrico</span></div>
                <div class="flex items-center bg-white p-4 border border-gray-300 text-gray-400"><div class="bg-sky-500 w-2 h-2 rounded-full mr-2"></div> <span>Agua</span></div>
            </div>
        </div>

        <div cdkDropListGroup>
            <h2 class="ml-4 mt-10 text-gray-400">Pokedex:</h2>
    
            <div cdkDropList id="pokemones" [cdkDropListData]="pokemones"
            class="flex w-full flex-col p-4 bg-red-600 overflow-x-auto rounded-xl" (cdkDropListDropped)="drop($event)">   
            <div class="flex space-x-4">
                    <div class="flex bg-white rounded-xl {{ pokemon.estilo }}" *ngFor="let pokemon of pokemones"
                    cdkDrag>
                    <!-- template para la información -->
                    <div class="w-[200px] rounded-l-xl">
                        <img class="rounded-xl object-cover object-center mb-2 hover:scale-125" src="{{ pokemon.img }}" alt="">
                    </div>
                    <div class="flex flex-col p-2 bg-gray-50 text-left w-[150px] rounded-r-xl">
                        <span class="text-2xl mb-2">{{pokemon.nombre}}</span>
                        <span class="text-gray-500 text-sm mb-2">salud: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.pv}}</span></span>
                        <span class="text-gray-500 text-sm mb-2">ataque: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.atk}}</span></span>
                        <span class="text-gray-500 text-sm mb-2">defensa: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.def}}</span></span>
                        
                    </div>
                </div>
            </div>
            
            <div class="text-gray-50/40 text-center text-3xl py-4">
                Desliza para ver más Pokemones <span aria-hidden="true">&rarr;</span>
            </div>
        </div>
        
        <div class="flex flex-col items-center mt-10 w-full">
            <h2 class="text-3xl text-gray-500">Campo de batalla</h2>
            <span class="text-sm text-gray-400 mb-4">Elige dos pokemones para pelear</span>
            
            <div class="relative flex rounded-xl z-[1] overflow-hidden w-full max-w-[600px] h-[500px] bg-cover bg-center border border-gray-400" style="background-image: url('/pokemon/estadio.jpg');">
                <div class="absolute size-full z-[1] bg-black/20"></div>
                
                <div cdkDropList id="campoDeBatalla" [cdkDropListData]="campoDeBatalla"
                class="grid grid-cols-2 w-full gap-4 p-10 rounded-xl z-10" (cdkDropListDropped)="drop($event)">
                
                <!-- Mensaje cuando la lista está vacía -->
                <div *ngIf="campoDeBatalla.length === 0" class="col-span-2 flex justify-center items-center text-center  text-gray-400 text-lg">
                    Agrega dos pokemones al campo de batalla
                </div>
                
                <!-- Elementos de la lista -->
                <div *ngFor="let pokemon of campoDeBatalla; let i= index" cdkDrag>
                    <div class="flex flex-col items-center px-4 py-2  w-full rounded-xl bg-white/80 {{ pokemon.estilo }}">
                        <div class="{{ pokemon.orientacion === 0 && i === 0 ? '-scale-x-[1]' : '' }}">
                            <img id="Pokemon{{ i }}" 
                            class="w-[200px] rounded-xl object-contain hover:scale-125" 
                            [ngClass]="{ 
                                'animate-bounce-scale': animar && pokemonActivo === i, 
                                'animate-shake': shake && pokemonActivo != i || buff && pokemonActivo === i, 
                                'animate-derrotado': derrotado && pokemonActivo != i, 
                                'animate-to-left': toLeft && pokemonActivo === i, 
                                'animate-to-right': toRight && pokemonActivo === i,
                                 }" 
                            src="{{ pokemon.img }}" alt="pokemon">
                        </div>
                        <div class="flex flex-col bg-white w-full rounded-xl p-2 {{ pokemon.estilo }}">
                            <span class="text-2xl mb-2">{{ pokemon.nombre }}</span>
                            <!-- <span class="text-gray-500 text-sm mb-2">salud: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.pv}}</span></span> -->

                            <div class="w-full bg-gray-300 rounded-lg h-6 overflow-hidden">
                                <div 
                                  class="h-full transition-all duration-300 rounded-lg"
                                  [ngClass]=" pokemon.estiloBatalla "
                                  [ngStyle]="{ width: ( pokemon.pv ) / 200 * 100 + '%' }">
                                </div>
                            </div>
                              
                            <span class="text-gray-500 text-sm mt-1">
                                Salud: <span class="{{ pokemon.estilo }} text-xl border-white">{{ pokemon.pv | number:'1.0-0' }}</span>
                            </span>
                              
                              
                            <span class="text-gray-500 text-sm mb-2">ataque: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.atk}}</span></span>
                            <span class="text-gray-500 text-sm mb-2">defensa: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.def}}</span></span>
                        </div>

                        <button class="{{ puedeAtacar ? 'bg-blue-500' : 'bg-gray-500' }}  text-white px-4 py-1 rounded-xl mt-2 select-none" [disabled]="!puedeAtacar" (click)="atacar(pokemon, i)">Atacar</button>
                        
                    </div>
                    </div>
        
                </div>
        
                </div>
        
        </div>
        
        <div class="mt-4">
            
            <div class="flex">
                <span class="ml-4 text-sm text-gray-400">acciones</span>
    
                <div class="flex items-center ml-4">
                    <div (click)="toggle()" class="group relative inline-flex h-5 w-10 shrink-0 cursor-pointer items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2">
                        <span class="sr-only">Use setting</span>
                        
                        <!-- Fondo del toggle -->
                        <span aria-hidden="true" class="pointer-events-none absolute w-full h-full rounded-md bg-white"></span>
                      
                        <!-- Parte de fondo gris -->
                        <span aria-hidden="true" 
                              class="pointer-events-none absolute mx-auto h-4 w-9 rounded-full {{ enabled ? 'bg-blue-500' : 'bg-gray-200'}} transition-colors duration-200 ease-in-out"></span>
                      
                        <!-- Botón del toggle -->
                        <span aria-hidden="true" 
                              class="pointer-events-none absolute left-0 inline-block h-5 w-5 transform rounded-full border border-gray-200 bg-white shadow ring-0 transition-transform duration-200 ease-in-out"
                              [class.translate-x-5]="enabled"></span>
                      </div>
                      <span class="ml-2 text-gray-400">{{ textAccionesToggle }}</span>
                </div>
            </div>

            <div class="bg-gray-200 rounded-xl p-8 text-white {{ enabled ? 'grid' : 'hidden' }} grid-cols-1 sm:grid-cols-2 gap-4 overflow-y-auto">
                <div class="grid grid-cols-1 xl:grid-cols-3 xl:w-fit rounded-xl {{ pokemon.estilo }}" *ngFor="let pokemon of campoDeBatalla; let i = index">
                    
                    <div class="flex justify-center bg-white max-xl:rounded-t-xl xl:rounded-l-xl">
                        <img class="object-contain self-center max-h-[200px] object-center mb-2 hover:scale-125" src="{{ pokemon.img }}" alt="">
                    </div>
    
                    <div class="flex flex-col bg-gray-100 text-left px-4 text-nowrap">

                        <span class="text-2xl mb-2">{{pokemon.nombre}}</span>
                        <span class="text-gray-500 text-sm mb-2">salud: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.pv | number:'1.0-0'}}</span></span>
                        <span class="text-gray-500 text-sm mb-2">ataque: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.atk}}</span></span>
                        <span class="text-gray-500 text-sm mb-2">defensa: <span class="{{ pokemon.estilo }} text-xl border-white">{{pokemon.def}}</span></span>
                        
                    </div>
    
                    <div class="max-xl:rounded-b-xl xl:rounded-r-xl bg-gray-700 text-white px-4 py-4">
                        <span class="text-xl col-span-2">Acciones</span>
                        <div class="grid grid-cols-1 gap-4">
                            
                            <div class="grid grid-cols-2 gap-1">
                                <span class="font-light col-span-2">Poder</span>
                                <button class="bg-blue-500 px-4 py-2 rounded-xl" (click)="editarEstadisticas(i, 0, 0)">Aumentar</button>
                                <button class="bg-blue-500 px-4 py-2 rounded-xl" (click)="editarEstadisticas(i, 0, 1)">Disminuir</button>
                            </div>

                            <div class="grid grid-cols-2 gap-1">
                                <span class="font-light col-span-2">Defensa</span>
                                <button class="bg-blue-500 px-4 py-2 rounded-xl" (click)="editarEstadisticas(i, 1, 0)">Aumentar</button>
                                <button class="bg-blue-500 px-4 py-2 rounded-xl" (click)="editarEstadisticas(i, 1, 1)">Disminuir</button>
                            </div>

                            <button class="bg-blue-500 px-4 py-2 rounded-xl" (click)="curarPokemon(i)">Restaurar Salud</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div>
            <span class="text-gray-400 ml-4">
                comentarios:
            </span>
            <div class="bg-gray-600 rounded-xl p-4 text-white h-[150px] overflow-y-auto">
                <div class="flex flex-col-reverse">
                    <div *ngFor="let comentario of comentarios" class="{{ comentario.diseno }}">
                        {{ comentario.texto }}
                    </div>
                </div>
            </div>
        </div>
        
        
        </div>


        
    </div>
    
</div>